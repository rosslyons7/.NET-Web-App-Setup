version: "3.9"

services:

  db:
   image: mysql:latest
   restart: always
   environment:
       MYSQL_DATABASE: 'db'
       MYSQL_USER: 'user'
       MYSQL_PASSWORD: 'password'
       MYSQL_ROOT_PASSWORD: 'password'
   ports:
     - '3307:3306'
   expose:
     - '3307'
   volumes:
     - my-db:/var/lib/mysql
  api:
    build: 
      context: .
      dockerfile: Dockerfile
    ports:
      - "5001:80"
    restart: always
    depends_on:
        - db
volumes:
  my-db:

